<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <template id="taxsurety_portal_updates"
              inherit_id="portal.portal_my_home">
        <xpath expr="//div[hasclass('o_portal_my_home')]" position="inside">
            <t t-if="(user_id.etp_q1 != '0' and user_id.etp_q1 != False) or (user_id.etp_q2 != '0' and user_id.etp_q2 != False) or (user_id.etp_q3 != '0' and user_id.etp_q3 != False) or (user_id.etp_q4 != '0' and user_id.etp_q4 != False)">
                <div class="mt-4">
                    <h3>Estimated Tax Payments</h3>
                    <div>
                        <t t-if="user_id.etp_q1 != '0' and user_id.etp_q1 != False">
                            <a class="list-group-item list-group-item-action d-flex align-items-center justify-content-between modal-opener"
                               data-bs-toggle="modal"
                               title="Click to update Q1 Tax Payments"
                               data-bs-target="#UpdateContactFolders"
                               data-h5="Q1 Tax Payments"
                               data-field_name="etp_q1">
                                <b>Q1:</b>
                                <t t-out="user_id.etp_q1"/>
                            </a>
                        </t>
                        <t t-if="user_id.etp_q2 != '0' and user_id.etp_q2 != False">
                            <a class="list-group-item list-group-item-action d-flex align-items-center justify-content-between modal-opener"
                               data-bs-toggle="modal"
                               title="Click to update Q2 Tax Payments"
                               data-field_name="etp_q2"
                               data-h5="Q2 Tax Payments"
                               data-bs-target="#UpdateContactFolders">
                                <b>Q2:</b>
                                <t t-out="user_id.etp_q2"/>
                            </a>
                        </t>
                        <t t-if="user_id.etp_q3 != '0' and user_id.etp_q3 != False">
                            <a class="list-group-item list-group-item-action d-flex align-items-center justify-content-between modal-opener"
                               title="Click to update Q3 Tax Payments"
                               data-bs-toggle="modal"
                               data-field_name="etp_q3"
                               data-h5="Q3 Tax Payments"
                               data-bs-target="#UpdateContactFolders">
                                <b>Q3:</b>
                                <t t-out="user_id.etp_q3"/>
                            </a>
                        </t>
                        <t t-if="user_id.etp_q4 != '0' and user_id.etp_q4 != False">
                            <a class="list-group-item list-group-item-action d-flex align-items-center justify-content-between modal-opener"
                               title="Click to update Q4 Tax Payments"
                               data-field_name="etp_q4"
                               data-h5="Q4 Tax Payments"
                               data-bs-toggle="modal"
                               data-bs-target="#UpdateContactFolders">
                                <b>Q4:</b>
                                <t t-out="user_id.etp_q4"/>
                            </a>
                        </t>
                    </div>
                </div>
            </t>
            <t t-if="user_id.est_savings != '0' and user_id.est_savings != False">
                <div class="mt-4">
                    <h3>Estimated Savings</h3>
                    <a class="list-group-item list-group-item-action d-flex align-items-center justify-content-between">
                        <b>Annual:</b>
                        <t t-out="user_id.est_savings"/>
                    </a>
                </div>
            </t>
            <t>
                <div class="mt-4">
                    <h3>Bank information</h3>
                    <a class="list-group-item list-group-item-action d-flex align-items-center justify-content-between modal-opener"
                        data-field_name="bank_name"
                        data-bs-toggle="modal"
                        data-bs-target="#UpdateOthers"
                        title="Update Bank Name">
                        <b>Bank name</b>
                        <t t-out="user_id.bank_name"/>
                    </a>
                    <a class="list-group-item list-group-item-action d-flex align-items-center justify-content-between modal-opener"
                        data-field_name="bank_accnt_no"
                        data-bs-toggle="modal"
                        data-bs-target="#UpdateOthers"
                        title="Update Bank Account Number">
                        <b>Bank account no.</b>
                        <t t-out="'X'*(len(user_id.bank_accnt_no) - 4) + user_id.bank_accnt_no[-4:] if user_id.bank_accnt_no and len(user_id.bank_accnt_no) > 4 else user_id.bank_accnt_no"/>
                    </a>
                    <a class="list-group-item list-group-item-action d-flex align-items-center justify-content-between modal-opener"
                        data-field_name="routing_no"
                        data-bs-toggle="modal"
                        data-bs-target="#UpdateOthers"
                        title="Update Routing Number">
                        <b>Routing no.</b>
                        <t t-out="user_id.routing_no"/>
                    </a>
                </div>
            </t>
            <t>
                <div class="mt-4">
                    <h3>Credit card information</h3>
                    <a class="list-group-item list-group-item-action d-flex align-items-center justify-content-between modal-opener"
                        data-field_name="cc_name"
                        data-bs-toggle="modal"
                        data-bs-target="#UpdateOthers"
                        title="Update Credit Card Name">
                        <b>Credit card name</b>
                        <t t-out="user_id.cc_name"/>
                    </a>
                    <a class="list-group-item list-group-item-action d-flex align-items-center justify-content-between modal-opener"
                        data-field_name="cc_no"
                        data-bs-toggle="modal"
                        data-bs-target="#UpdateOthers"
                        title="Update Credit Card Number">
                        <b>Credit card no.</b>
                        <t t-out="'X'*(len(user_id.cc_no) - 4) + user_id.cc_no[-4:] if user_id.cc_no and len(user_id.cc_no) > 4 else user_id.cc_no"/>
                    </a>
                    <a class="list-group-item list-group-item-action d-flex align-items-center justify-content-between modal-opener"
                        data-field_name="cc_code"
                        data-bs-toggle="modal"
                        data-bs-target="#UpdateOthers"
                        title="Update Security Code">
                        <b>Security code</b>
                        <t t-out="user_id.cc_code"/>
                    </a>
                    <a class="list-group-item list-group-item-action d-flex align-items-center justify-content-between modal-opener"
                        data-bs-toggle="modal"
                        title="Update Expiration Date"
                        data-bs-target="#UpdateExpiration">
                        <b>Expiration date</b>
                        <t t-out="user_id.cc_exp_date_month"/> / <t t-out="user_id.cc_exp_date_year"/>
                    </a>
                </div>
            </t>

            <div class="modal se-modal"
                 id="UpdateContactFolders"
                 tabindex="-1"
                 role="dialog"
                 t-att-aria-labelledby="UpdateContactFolders"
                 aria-hidden="true">
                <div class="modal-dialog se-modal__dialog"
                     role="document">
                    <div class="modal-content se-modal__content">
                        <div class="modal-header">
                            <h5 class="modal-title se-modal__title document">
                            </h5>
                            <button type="button"
                                    class="close"
                                    data-bs-dismiss="modal"
                                    aria-label="Close">
                                <span aria-hidden="false">
                                    X
                                </span>
                            </button>
                        </div>
                        <div class="modal-body upload--document-modal">
                            <form class="upload_form submission__form"
                                  style="display:flex; justify-content: center; flex-direction: column;"
                                  action="/my/contacts/update"
                                  method="post"
                                  enctype="multipart/form-data">
                                <input type="hidden"
                                       name="csrf_token"
                                       t-att-value="request.csrf_token()"/>

                                <input type="hidden"
                                       name="field_name"
                                       id="field_name"/>

                                <label for="workspace_name">
                                    Description
                                </label>
                                <textarea id="description"
                                          name="description"
                                          required="required"/>
                                <div style="display: contents;">
                                    <input type="submit"
                                           class="btn btn-primary mt-4"/>
                                </div>

                            </form>

                        </div>
                    </div>
                </div>
            </div>

            <div class="modal se-modal"
                 id="UpdateOthers"
                 tabindex="-1"
                 role="dialog"
                 t-att-aria-labelledby="UpdateOthers"
                 aria-hidden="true">
                <div class="modal-dialog se-modal__dialog"
                     role="document">
                    <div class="modal-content se-modal__content">
                        <div class="modal-header">
                            <h5 class="modal-title se-modal__title document">
                            </h5>
                            <button type="button"
                                    class="close"
                                    data-bs-dismiss="modal"
                                    aria-label="Close">
                                <span aria-hidden="false">
                                    X
                                </span>
                            </button>
                        </div>
                        <div class="modal-body upload--document-modal">
                            <form class="upload_form submission__form"
                                  style="display:flex; justify-content: center; flex-direction: column;"
                                  action="/my/contacts/bank_and_cc_update"
                                  method="post"
                                  enctype="multipart/form-data">
                                <input type="hidden"
                                       name="csrf_token"
                                       t-att-value="request.csrf_token()"/>

                                <input type="hidden"
                                       name="field_name"
                                       id="field_name"/>

                                <input id="bank_and_cc"
                                          name="bank_and_cc"
                                          required="required"/>
                                <div style="display: contents;">
                                    <input type="submit"
                                           class="btn btn-primary mt-4"/>
                                </div>

                            </form>

                        </div>
                    </div>
                </div>
            </div>

            <div class="modal se-modal"
                 id="UpdateExpiration"
                 tabindex="-1"
                 role="dialog"
                 t-att-aria-labelledby="UpdateExpiration"
                 aria-hidden="true">
                <div class="modal-dialog se-modal__dialog"
                     role="document">
                    <div class="modal-content se-modal__content">
                        <div class="modal-header">
                            <h5 class="modal-title se-modal__title document">
                                Update Expiration Date
                            </h5>
                            <button type="button"
                                    class="close"
                                    data-bs-dismiss="modal"
                                    aria-label="Close">
                                <span aria-hidden="false">
                                    X
                                </span>
                            </button>
                        </div>
                        <div class="modal-body upload--document-modal">
                            <form class="upload_form submission__form"
                                  style="display:flex; justify-content: center; flex-direction: column;"
                                  action="/my/contacts/cc_expiration_update"
                                  method="post"
                                  enctype="multipart/form-data">
                                <input type="hidden"
                                       name="csrf_token"
                                       t-att-value="request.csrf_token()"/>
                                <input type="hidden"
                                       id="month"
                                       t-att-value="'0' + user_id.partner_id.cc_exp_date_month if user_id.partner_id.cc_exp_date_month and len(user_id.partner_id.cc_exp_date_month) == 1 else user_id.partner_id.cc_exp_date_month"/>
                                <input type="hidden"
                                       id="year"
                                       t-att-value="user_id.partner_id.cc_exp_date_year"/>
                                <input id="cc_month_year"
                                       name="cc_month_year"
                                       type="month"
                                       required="required"/>
                                <div style="display: contents;">
                                    <input type="submit"
                                           class="btn btn-primary mt-4"/>
                                </div>

                            </form>

                        </div>
                    </div>
                </div>
            </div>
        </xpath>
    </template>

    <template id="taxsurety_details_updates" inherit_id="portal.portal_layout">
        <xpath expr="//div[@id='wrap']//div[hasclass('o_my_sidebar')]" position="inside">
            <div class="mt-4">
                <h3>Tax Return Results</h3>
                <div>
                    <t t-if="user_id.federal_return_results">
                        <a class="list-group-item list-group-item-action d-flex align-items-center justify-content-between modal-opener"
                           data-bs-toggle="modal"
                           title="Click to update Federal return results"
                           data-bs-target="#UpdateContactFolders"
                           data-h5="Federal Return Results"
                           data-field_name="federal_return_results">
                            <b>Federal Return Results:</b>
                        </a>
                        <div class="px-3 py-2">
                            <t t-out="user_id.federal_return_results"/>
                        </div>
                    </t>
                    <t t-if="user_id.state_return_results">
                        <a class="list-group-item list-group-item-action d-flex align-items-center justify-content-between modal-opener"
                           data-bs-toggle="modal"
                           title="Click to update State return results"
                           data-bs-target="#UpdateContactFolders"
                           data-h5="State Return Results"
                           data-field_name="state_return_results">
                            <b>State Return Results:</b>
                        </a>
                        <div class="px-3 py-2">
                            <t t-out="user_id.state_return_results"/>
                        </div>
                    </t>
                </div>
            </div>
        </xpath>
    </template>
</odoo>
